<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Esparagoza Dental Clinic</title>
  <link rel="icon" href="https://i.imgur.com/t942gBV.png">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
    body {
      background: linear-gradient(135deg, #b3d9ff, #e6f0ff);
      min-height: 100vh;
      overflow-x: hidden;
      color: #0b3756;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: linear-gradient(90deg, #2ea0ff, #0b6bcb);
      color: white;
    }

    header img {
      height: 50px;
    }

    header h1 {
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
      flex: 1;
    }

    /* Section transitions */
    section {
      width: 100%;
      min-height: 100vh;
      padding: 30px 20px;
      display: none;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    section.active {
      display: block;
      opacity: 1;
    }

    /* Home Page */
    #homePage {
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #2ea0ff, #0b6bcb);
      color: white;
      padding: 60px 20px;
    }

    #homePage img {
      width: 90px;
      margin-bottom: 20px;
    }

    #homePage h2 {
      font-size: 2rem;
      margin-bottom: 10px;
    }

    #homePage p {
      font-size: 1rem;
      margin-bottom: 20px;
    }

    .main-btn {
      background: white;
      color: #0b6bcb;
      font-weight: 600;
      padding: 12px 24px;
      border: none;
      border-radius: 40px;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,0.2);
      transition: 0.3s;
    }

    .main-btn:hover {
      transform: scale(1.05);
      background: #f8faff;
    }

    /* Booking Page */
    #bookingPage {
      background: #f8fbff;
    }

    .back-btn {
      display: inline-block;
      background: linear-gradient(90deg, #2ea0ff, #0b6bcb);
      color: white;
      padding: 8px 14px;
      border-radius: 8px;
      margin-bottom: 20px;
      cursor: pointer;
      border: none;
      font-weight: 500;
    }

    .card {
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 12px 40px rgba(7,36,63,.06);
      margin: 18px auto;
      max-width: 520px;
      padding: 18px;
      width: 94%;
    }

    .cal-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .cal-month {
      font-weight: 700;
      color: #0b6bcb;
      font-size: 18px;
    }

    .nav-btn {
      background: linear-gradient(90deg, #2ea0ff, #0b6bcb);
      color: #fff;
      border: none;
      padding: 6px 10px;
      border-radius: 10px;
      cursor: pointer;
    }

    .weeknames {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      color: #3b6b90;
      font-size: 12px;
      text-align: center;
      margin-bottom: 6px;
    }

    .cal-grid {
      display: grid;
      grid-template-columns: repeat(7, minmax(0, 1fr));
      gap: 8px;
      width: 100%;
      box-sizing: border-box;
    }

    .day-tile {
      aspect-ratio: 1 / 1;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      background: #fff;
      color: #0b6bcb;
      font-weight: 600;
      cursor: pointer;
      transition: background .2s;
      min-width: 0;
      overflow: hidden;
    }

    .day-tile.booked {
      background: #ccc;
      color: #666;
      cursor: not-allowed;
    }

    @media (min-width: 768px) {
      #homePage h2 { font-size: 2.5rem; }
      .card { max-width: 600px; }
    }
  </style>
</head>
<body>
  <header>
    <img src="https://i.imgur.com/t942gBV.png" alt="Logo">
    <h1>Esparagoza Dental Clinic</h1>
  </header>

  <!-- Page 1: Home -->
  <section id="homePage" class="active">
    <img src="https://i.imgur.com/t942gBV.png" alt="Logo">
    <h2>Esparagoza Dental Clinic</h2>
    <p id="todayDate"></p>
    <p><b>Your dentist is IN</b></p>
    <p>Hi, stay safe by following our protocols. Thanks!</p>
    <button class="main-btn" id="bookNowBtn">Make an Appointment</button>
  </section>

  <!-- Page 2: Booking -->
  <section id="bookingPage">
    <button class="back-btn" id="backHomeBtn">← Back to Home</button>

    <div class="card cal-card">
      <div class="cal-top">
        <button class="nav-btn" id="prevMonth">‹</button>
        <span class="cal-month" id="monthYear"></span>
        <button class="nav-btn" id="nextMonth">›</button>
      </div>
      <div class="weeknames">
        <span>Sun</span><span>Mon</span><span>Tue</span>
        <span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
      </div>
      <div class="cal-grid" id="calendarDays"></div>
      <p style="font-size:13px;color:#666;margin-top:6px;text-align:center">
        Closed or fully booked dates are grayed out.
      </p>
    </div>

    <div class="card">
      <h2 style="color:#0b3756;margin-bottom:12px;">Book an Appointment</h2>
      <form id="bookingForm">
        <label>Full Name</label>
        <input type="text" id="name" required style="width:100%;padding:10px;border-radius:10px;border:1px solid #ccc;margin-bottom:10px;">

        <label>Email</label>
        <input type="email" id="email" required style="width:100%;padding:10px;border-radius:10px;border:1px solid #ccc;margin-bottom:10px;">

        <label>Phone</label>
        <input type="tel" id="phone" required style="width:100%;padding:10px;border-radius:10px;border:1px solid #ccc;margin-bottom:10px;">

        <label>Service</label>
        <select id="service" required style="width:100%;padding:10px;border-radius:10px;border:1px solid #ccc;margin-bottom:10px;">
          <option value="">Select Service</option>
          <option>Pediatric Dentistry</option>
          <option>Restorative Dentistry (Tooth Filling)</option>
          <option>Prosthodontics</option>
          <option>Veneers Dental Crown</option>
          <option>Cosmetic Dentistry</option>
          <option>Oral Surgery</option>
          <option>Orthodontics</option>
        </select>

        <label>Date</label>
        <input type="text" id="date" readonly placeholder="Select date from calendar" required style="width:100%;padding:10px;border-radius:10px;border:1px solid #ccc;margin-bottom:10px;">

        <label>Time</label>
        <select id="time" required style="width:100%;padding:10px;border-radius:10px;border:1px solid #ccc;margin-bottom:10px;">
          <option value="">Select a time slot</option>
          <option>9:00 AM</option><option>9:30 AM</option>
          <option>10:00 AM</option><option>10:30 AM</option>
          <option>11:00 AM</option><option>11:30 AM</option>
          <option>12:00 NN</option><option>12:30 PM</option>
          <option>1:00 PM</option><option>1:30 PM</option>
          <option>2:00 PM</option><option>2:30 PM</option>
          <option>3:00 PM</option><option>3:30 PM</option>
          <option>4:00 PM</option>
        </select>

        <label>Notes (optional)</label>
        <textarea id="notes" rows="3" style="width:100%;padding:10px;border-radius:10px;border:1px solid #ccc;margin-bottom:10px;"></textarea>

        <button type="submit" style="background:linear-gradient(90deg,#2ea0ff,#0b6bcb);color:#fff;width:100%;padding:12px;border:none;border-radius:10px;font-weight:600;">
          Submit Booking
        </button>
      </form>
    </div>
  </section>

  <script type="module">
    /* ---------------- Firebase Setup ---------------- */
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getDatabase, ref, push, get } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCV39b2CkzS_tt75SVXa6z95s6f4qVlfLg",
      authDomain: "esparagozadentalclinic-6a744.firebaseapp.com",
      databaseURL: "https://esparagozadentalclinic-6a744-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "esparagozadentalclinic-6a744",
      storageBucket: "esparagozadentalclinic-6a744.firebasestorage.app",
      messagingSenderId: "959639046373",
      appId: "1:959639046373:web:ccf39df13d94e527fcec0c"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    /* ---------------- UI Navigation ---------------- */
    const homePage = document.getElementById("homePage");
    const bookingPage = document.getElementById("bookingPage");
    const bookNowBtn = document.getElementById("bookNowBtn");
    const backHomeBtn = document.getElementById("backHomeBtn");

    bookNowBtn.addEventListener("click", () => {
      homePage.classList.remove("active");
      bookingPage.classList.add("active");
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    backHomeBtn.addEventListener("click", () => {
      bookingPage.classList.remove("active");
      homePage.classList.add("active");
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    /* ---------------- Calendar ---------------- */
    const calendarDays = document.getElementById("calendarDays");
    const monthYear = document.getElementById("monthYear");
    const prevMonth = document.getElementById("prevMonth");
    const nextMonth = document.getElementById("nextMonth");
    const dateInput = document.getElementById("date");

    let currentDate = new Date();

    function renderCalendar() {
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      monthYear.textContent = currentDate.toLocaleDateString("en-US", { month: "long", year: "numeric" });
      calendarDays.innerHTML = "";

      for (let i = 0; i < firstDay; i++) {
        const blank = document.createElement("div");
        calendarDays.appendChild(blank);
      }

      for (let day = 1; day <= daysInMonth; day++) {
        const tile = document.createElement("div");
        tile.className = "day-tile";
        tile.textContent = day;
        const thisDate = `${year}-${month + 1}-${day}`;
        tile.addEventListener("click", () => selectDate(thisDate));
        calendarDays.appendChild(tile);
      }
    }

    prevMonth.addEventListener("click", () => {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar();
    });
    nextMonth.addEventListener("click", () => {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar();
    });

    function selectDate(date) {
      dateInput.value = new Date(date).toLocaleDateString();
    }

    renderCalendar();

    /* ---------------- Booking Form ---------------- */
    const bookingForm = document.getElementById("bookingForm");

    bookingForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const bookingData = {
        name: name.value,
        email: email.value,
        phone: phone.value,
        service: service.value,
        date: date.value,
        time: time.value,
        notes: notes.value,
        timestamp: Date.now()
      };

      try {
        await push(ref(db, "bookings"), bookingData);
        alert("Booking submitted successfully!");
        bookingForm.reset();
        dateInput.value = "";
      } catch (err) {
        alert("Error submitting booking: " + err);
      }
    });

    /* ---------------- Date & Gray-out ---------------- */
    document.getElementById("todayDate").textContent = 
      "Today is " + new Date().toLocaleDateString("en-US", { weekday:"long", year:"numeric", month:"long", day:"numeric" });
  </script>
</body>
  </html>
